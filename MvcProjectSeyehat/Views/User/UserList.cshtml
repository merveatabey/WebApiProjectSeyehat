@{ Layout = "~/Views/Shared/_AdminLayout.cshtml"; }



@using MvcProjectSeyehat.Models.ViewModels
@model List<ApiProjectSeyehat.Models.User>


<div class="card mb-4">
    <div class="card-header d-flex justify-content-between align-items-center">
        <span>
            <i class="fas fa-table me-1"></i>
            Kullanıcı Listesi
        </span>

        <a asp-action="Create" asp-controller="Personel" class="btn btn-success btn-sm">
            <i class="fas fa-plus"></i> Kullanıcı Ekle
        </a>
    </div>
    <div class="card-body">
        <table id="datatablesSimple" class="table table-bordered">
            <thead>
                <tr>
                    <th>Ad Soyad</th>
                    <th>Email</th>
                    <th>Şifre</th>
                    <th>Kayıt Tarihi</th>
                    <th>Rol</th>
                    <th>İşlemler</th>
                </tr>
            </thead>

            <tbody>
                @foreach (var item in Model)
                {
                    <tr>
                        <td>@item.Name</td>
                        <td>@item.Email</td>
                        <td>@item.Password</td>
                        <td>@item.CreatedTime</td>
                        <td>@item.Role</td>
                  
                        <td>
                            <a asp-action="Edit" asp-controller="User" asp-route-id="@item.UserId" class="btn btn-outline-warning btn-sm" onclick="edit(this)">Edit</a>
                            <form asp-action="Delete" asp-controller="User" method="post" style="display:inline" onsubmit="return del(this)">
                                <input type="hidden" name="id" value="@item.UserId" />
                                <button type="submit" class="btn btn-outline-danger btn-sm">Delete</button>
                            </form>

                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>

<script>function edit(element) {

        alert("Güncelleme sayfasına yönlendiriliyorsunuz!")

        //tüm satırlardaki seçimi kaldır (isteğe bağlı)
        const rows = document.querySelectorAll('#datatablesSimple tbody tr');
        rows.forEach(row => row.style.backgroundColor = '');

        //tıklanana satırı bul
        const tr = element.closest('tr');
        //satırın arka plan rengini değiştir
        tr.style.backgroundColor = '#fff3cd';

    }

    function del(element) {

        const rows = document.querySelectorAll('#datatableSimple tbody tr');
        rows.forEach(row => row.style.backgroundColor = '');

        const tr = element.closest('tr');
        tr.style.backgroundColor = '#f8d7da';

        return true;
    }</script>

